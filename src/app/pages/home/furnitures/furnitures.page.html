<ion-content [fullscreen]="true">

  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)" mode="ios">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="search">
    <h1>Muebles</h1>
    <ion-searchbar 
      mode="ios"
      placeholder="Buscar"
      [(ngModel)]="searchQuery"
      (ionInput)="filterFurnitures()"
      maxlength="50">
    </ion-searchbar>
  </div>

  <div id="separator">
  </div>

  <div id="filteredFurnitures" *ngIf="filteredFurnitures.length === 0 && searchQuery">
    <p>No se han encontrado muebles con el nombre de: "{{ searchQuery }}"</p>
  </div>

  <div id="nonFurnitures" *ngIf="furnitures.length === 0 && !searchQuery">
    <p>No tienes ningun mueble agregado.</p>
  </div>

  <section class="cards">

    <div class="card" *ngFor="let furniture of filteredFurnitures">
      <ion-grid>
        <ion-row>
          <ion-col size="12">
            <ion-card mode="ios">
              <img [src]="furniture.frontImg" alt="">
              <ion-card-header>
                <ion-card-title>
                  <h1>{{ furniture.name }}</h1>
                </ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <p id="description">{{ furniture.description }}</p>
                <div class="buttons">
                  <button (click)="editFurniture()">
                    <p>Editar</p>
                    <ion-icon name="create"></ion-icon>
                  </button>
                  <button (click)="deleteFurniture()">
                    <p>Eliminar</p>
                    <ion-icon name="trash"></ion-icon>
                  </button>
                  <button (click)="viewFurniture(furniture)">
                    <p>Visualizar</p>
                    <ion-icon name="eye"></ion-icon>
                  </button>
                </div>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

    <div id="separator2">
    </div>
  
  </section>

  <section class="fabButton">
    <ion-fab vertical="bottom" horizontal="end" slot="fixed">
      <ion-fab-button id="addFurniture">
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </section>

  <ion-modal trigger="addFurniture" mode="ios">
    <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Agregar mueble</ion-title>
        <ion-buttons slot="start">
          <ion-button (click)="dismissModal()">Cancelar</ion-button>
        </ion-buttons>
        <ion-buttons slot="end">
          <ion-button (click)="addFurniture()">Agregar</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content>

      <div class="addFurniture">

        <section class="basicDetails">
          <h1>Detalles basicos</h1>

          <div>
            <ion-input 
              mode="md"
              label="Nombre"
              label-placement="stacked" 
              fill="outline" 
              placeholder="¡Escoje un nombre interesante!"
              (ionInput)="validateInput($event, 'input')">
            </ion-input>

            <ion-textarea 
              mode="md"
              label="Descripción"
              label-placement="stacked" 
              fill="outline"
              [autoGrow]="true"
              placeholder="¡Escoje una descripción interesante!"
              [counter]="true"
              maxlength="150"
              (ionInput)="validateInput($event, 'textarea')">
            </ion-textarea>
          </div>

        </section>

        <section class="photo">
          <h1>Fotografía</h1>
        </section>

        <section class="avancedDetails">
          <h1>Detalles avanzados</h1>
        </section>

      </div>

    </ion-content>
    </ng-template>
  </ion-modal>

</ion-content>